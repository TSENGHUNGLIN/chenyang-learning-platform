# 晨陽同仁成長分析 - 專案待辦事項

## 當前任務：完善編輯者權限控制 + 批次匯入 + 使用者名稱編輯

### 完善編輯者權限控制
- [x] 更新考試管理頁面：編輯者只能看到負責考生的考試
- [x] 更新考試管理頁面：編輯者只能指派考試給負責的考生
- [x] 更新考試指派介面：過濾考生列表（只顯示負責的考生）
- [x] 更新成績管理頁面：編輯者只能查看負責考生的成績
- [x] 更新考試統計頁面：編輯者只能看到負責考生的統計資料
- [x] 測試權限控制邏輯

### 使用者名稱編輯功能
- [x] 在使用者管理頁面新增「編輯名稱」按鈕
- [x] 實作編輯名稱對話框UI
- [x] 實作後端API：更新使用者名稱
- [x] 確保名稱更新後即時反映在所有頁面
- [x] 測試名稱編輯功能

### 部門同仁批次匯入功能
- [x] 設計批次匯入資料格式（CSV/Excel）
- [x] 在部門人員頁面新增「批次匯入」按鈕
- [x] 實作檔案上傳UI
- [x] 實作後端API：解析CSV/Excel檔案
- [x] 實作批次建立員工邏輯（含部門關聯）
- [x] 實作匯入結果預覽和確認
- [x] 處理重複資料和錯誤情況
- [x] 測試批次匯入功能

---

## 已完成功能（最近更新）

### 編輯者權限控制系統（混合制）
- [x] 設計資料庫schema：新增 editorDepartmentAccess 表（編輯者-部門關聯）
- [x] 設計資料庫schema：新增 editorUserAccess 表（編輯者-考生關聯）
- [x] 執行資料庫遷移（db:push）
- [x] 實作後端API：設定編輯者負責的部門
- [x] 實作後端API：設定編輯者負責的考生
- [x] 實作後端API：查詢編輯者可訪問的考生列表
- [x] 實作後端API：檢查編輯者是否有權訪問特定考生
- [x] 建立編輯者權限管理頁面（管理員專用）
- [x] 實作編輯者-部門繫定UI
- [x] 實作編輯者-考生繫定UI

### 評核日曆全域檢視模式
- [x] 實作後端API：getAllExamAssignments（管理者/編輯者專用，含權限過濾）
- [x] 在Calendar頁面新增檢視模式切換按鈕（我的考試 / 所有考試）
- [x] 實作全域檢視邏輯，顯示所有可訪問考生的考試排程
- [x] 新增考生篩選功能（按部門、按人員）
- [x] 實作權限控制：編輯者只看到負責的考生
- [x] 測試全域檢視功能

### 考試截止日期提醒功能
- [x] 設計提醒資料庫schema（examReminders表）
- [x] 建立定時任務系統（使用schedule工具）
- [x] 實作提醒檢查邏輯（截止前3天、1天和當天）
- [x] 整合notifyOwner API發送提醒通知
- [x] 實作提醒狀態追蹤（避免重複提醒）
- [x] 測試提醒功能

### 週檢視模式
- [x] 設計週檢視UI佈局
- [x] 實作週檢視日期計算邏輯（當週一到週日）
- [x] 實作週檢視切換按鈕（月檢視 / 週檢視）
- [x] 實作週檢視考試顯示（按日期分組）
- [x] 實作週檢視導航（上一週 / 下一週）
- [x] 新增「本週」按鈕快速回到當前週
- [x] 測試週檢視功能

---

## 歷史功能記錄

### 評核日曆基礎功能
- [x] 將日曆檢視改造成評核日曆
- [x] 移除舊的檔案上傳日曆邏輯
- [x] 實作評核日曆顯示，按考試截止日期分組
- [x] 用顏色區分考試狀態（待考/進行中/已提交/已評分/逾期/即將到期）
- [x] 新增考試狀態統計卡片
- [x] 支援點擊考試卡片跳轉到對應頁面
- [x] 新增「今天」按鈕快速回到當前月份
- [x] 更新側邊欄導航標籤為「評核日曆」

### 線上考試系統
- [x] 設計考試資料庫schema（exams、examQuestions、examAssignments、examSubmissions、examScores）
- [x] 實作考試建立和管理功能
- [x] 實作考生作答介面（倒數計時、進度條、自動儲存）
- [x] 實作自動評分系統（是非題、選擇題、AI評分）
- [x] 實作成績查看頁面
- [x] 實作考試統計報表
- [x] 實作人工評分介面
- [x] 實作成績匯出功能（Excel）
- [x] 實作考試狀態管理（待開始/進行中/已提交/已評分）
- [x] 實作考卷範本系統

### 題庫管理系統
- [x] 設計題庫資料庫schema
- [x] 建立題庫管理頁面
- [x] 實作新增/編輯/刪除考題功能
- [x] 實作題目分類和標籤系統
- [x] 實作批次匯入功能（CSV/Excel）
- [x] 實作題庫檔案系統
- [x] 實作題目回收站功能
- [x] 整合AI出題功能

### AI分析功能
- [x] 實作AI分析出題功能
- [x] 實作分析結果匯出（Word）
- [x] 實作分析結果匯入題庫
- [x] 實作AI分析快取機制
- [x] 實作AI分析品質評分系統
- [x] 支援多種檔案格式（DOCX、CSV）

### 基礎功能
- [x] Google OAuth登入整合
- [x] 邀請制存取控制
- [x] 角色權限管理（admin、editor、viewer、examinee）
- [x] 部門與人員管理
- [x] 檔案上傳與管理
- [x] 搜尋功能（關鍵字高亮）
- [x] 使用者管理




## 當前任務：整合編輯者權限到使用者管理頁面
- [x] 在使用者管理頁面新增「管理權限」按鈕（針對編輯者角色）
- [x] 將 EditorPermissions 的權限設定功能整合到 Users 頁面
- [x] 實作權限設定對話框（部門和考生選擇）
- [x] 移除獨立的 EditorPermissions 頁面
- [x] 移除側邊欄的「編輯者權限」導航選項
- [x] 更新路由設定，移除 /editor-permissions 路由
- [x] 測試整合後的功能

## 當前任務：UI文字調整
- [x] 將首頁「日曆檢視」卡片標題改為「評核日曆」



## 當前任務：大規模考試系統優化（支援100人以上同時考試）

### 核心效能優化
- [x] 優化自動儲存機制（從2秒改為5秒，實作批次儲存）
- [x] 配置資料庫連線池（增加最大連線數至150）
- [x] 實作答案本地快取機制（減少API請求）
- [ ] 優化題目載入策略（預載入和分頁）

### 錯誤處理和容錯機制
- [x] 實作自動重試機制（網路錯誤時自動重試）
- [x] 新增離線答案儲存（網路斷線時暫存本地）
- [x] 強化錯誤提示和使用者引導
- [x] 實作答案衝突解決機制

### 效能監控和管理功能
- [ ] 新增考試監控儀表板（即時查看考試狀態）
- [ ] 實作系統效能監控（API回應時間、錯誤率）
- [ ] 新增考試進度追蹤（已開始/進行中/已完成人數）
- [ ] 實作異常告警機制（自動通知管理員）

### 測試和驗證
- [ ] 撰寫壓力測試腳本
- [ ] 執行模擬測試（50人、80人、100人）
- [ ] 撰寫單元測試和整合測試
- [ ] 建立效能基準和監控指標





## 當前任務：室內設計業題庫分類與標籤體系建立

### 第一階段：建立基礎架構
- [x] 批次建立8大主分類（設計美學、工程管理、客戶關係、廠商管理、專業溝通、制度流程、領導管理、法規知識）
- [x] 建立所有子分類（32個分類，含8個主分類 + 24個子分類）
- [x] 建立8類標籤體系（難度、職位、考核類型、技能類型、軟體工具、重要程度、題目來源、更新狀態）
- [x] 建立44個預設標籤

### 第二階段：AI功能整合
- [ ] 修改AI分析功能，新增「考題出處」欄位
- [ ] 實作自動標記「AI生成」標籤
- [ ] 實作AI建議分類功能（根據關鍵字）
- [ ] 實作AI建議標籤功能
- [ ] 新增考題出處追蹤介面

### 第三階段：批次管理功能
- [ ] 實作題目批次設定分類功能
- [ ] 實作題目批次新增標籤功能
- [ ] 實作題目批次移除標籤功能
- [ ] 新增批次操作記錄

### 第四階段：使用者體驗優化
- [ ] 優化題庫管理頁面的篩選功能
- [ ] 新增分類和標籤統計視圖
- [ ] 建立題庫架構視覺化展示
- [ ] 撰寫使用手冊


