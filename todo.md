# 晨陽同仁成長分析 - 專案待辦事項

## 調整側邊欄選單順序（2025-01-22）

### 第一次調整（已完成）
- [x] 在 DashboardLayout.tsx 中調整選單項目順序
- [x] 將「補考管理」移到「考試監控」之上
- [x] 測試導航功能
- [x] 儲存檢查點
- [x] 將「考卷範本」移到「分類管理」之上
- [x] 測試新選單順序
- [x] 儲存檢查點

### 第二次調整（進行中）
- [x] 在 DashboardLayout.tsx 中調整選單項目順序
- [x] 將「評核日曆」之下的項目調整為：分類管理 → 標籤管理 → 檔案管理 → AI分析出題
- [x] 測試導航功能
- [x] 儲存檢查點

---

## 考試不及格處理機制（2025-01-22）

### 階段一：資料庫架構設計與補考機制實作
- [x] 設計補考資料表（makeupExams）
- [x] 新增考試狀態欄位（failed、makeup_pending、makeup_completed）
- [x] 實作自動標記不及格考生功能
- [x] 建立補考安排 API（createMakeupExam）
- [x] 實作補考次數限制邏輯
- [x] 實作補考截止日期管理
- [x] 建立補考管理介面（管理員/編輯者專用）
- [x] 測試補考機制

### 階段二：重新學習建議系統開發
- [x] 建立學習建議資料表（learningRecommendations）
- [x] 實作錯題分析演算法
- [x] 建立「需加強知識點」生成邏輯
- [ ] 整合 AI 生成學習建議功能
- [x] 實作相關題目推薦演算法
- [x] 建立學習建議顯示頁面（考生端）
- [ ] 測試學習建議功能

### 階段三：通知提醒系統整合
- [x] 實作不及格通知功能（通知考生）
- [x] 實作補考提醒功能（考試前3天、1天）
- [x] 實作管理員關注名單通知
- [x] 建立通知記錄表（notifications）
- [x] 實作通知歷史查詢功能
- [ ] 測試通知系統

### 階段四：進度追蹤儀表板實作
- [x] 建立「待補考」考試狀態標記
- [x] 建立補考進度儀表板頁面
- [x] 實作補考統計圖表（補考率、通過率）
- [x] 實作成績變化追蹤
- [ ] 測試進度追蹤功能

### 階段五：整合測試與交付
- [ ] 測試完整的不及格處理流程
- [ ] 測試補考機制
- [ ] 測試學習建議功能
- [ ] 測試通知系統
- [ ] 測試進度追蹤功能
- [ ] 編寫完整的測試案例
- [ ] 儲存檢查點並交付

---

## 已完成功能（歷史記錄）

### 改進現有預視功能（2025-01-22）
- [x] CSV 預覽改進
- [x] 考卷範本預覽功能
- [x] 檔案預覽改進
- [x] 題目預覽改進
- [x] 考試預覽功能
- [x] 測試和優化

### UI全站優化：蘋果風格設計應用（2025-01-22）
- [x] 移除首頁的「快速搜尋」區塊
- [x] 移除首頁的「支援檔案格式說明」區塊
- [x] 在檔案管理頁面的上傳對話框中加入檔案格式說明
- [x] 將蘋果風格卡片設計應用到所有頁面

### 線上考試系統
- [x] 設計考試資料庫schema
- [x] 實作考試建立和管理功能
- [x] 實作考生作答介面
- [x] 實作自動評分系統
- [x] 實作成績查看頁面
- [x] 實作考試統計報表
- [x] 實作人工評分介面
- [x] 實作成績匯出功能
- [x] 實作考試狀態管理
- [x] 實作考卷範本系統

### 題庫管理系統
- [x] 設計題庫資料庫schema
- [x] 建立題庫管理頁面
- [x] 實作新增/編輯/刪除考題功能
- [x] 實作題目分類和標籤系統
- [x] 實作批次匯入功能（CSV）
- [x] 實作題庫檔案系統
- [x] 實作題目回收站功能
- [x] 整合AI出題功能

### 基礎功能
- [x] Google OAuth登入整合
- [x] 邀請制存取控制
- [x] 角色權限管理
- [x] 部門與人員管理
- [x] 檔案上傳與管理
- [x] 搜尋功能
- [x] 使用者管理



## 麵包屑導航功能（2025-01-22）

- [x] 建立 Breadcrumb 元件（使用 shadcn/ui）
- [x] 定義所有頁面的路徑映射和層級關係
- [x] 建立 PageHeader 元件整合麵包屑和色塊設計
- [ ] 在所有頁面中整合 PageHeader（待繼續實作）
- [ ] 測試所有頁面的麵包屑顯示
- [ ] 測試麵包屑連結導航功能
- [x] 儲存檢查點

---

## 頁面UI優化：蘋果風格色塊設計（2025-01-22）

- [x] 為15個功能頁面設計彩色色塊配置（蘋果風格）
- [x] 優化首頁佈局：將「最新活動報告」移至最下方
- [x] 在首頁加入色塊設計（藍色主題）
- [ ] 在其他頁面陸續加入色塊設計（待繼續實作）
- [ ] 在評核日曆頁面加入色塊設計
- [ ] 在分類管理頁面加入色塊設計
- [ ] 在標籤管理頁面加入色塊設計
- [ ] 在檔案管理頁面加入色塊設計
- [ ] 在AI分析出題頁面加入色塊設計
- [ ] 在題庫管理頁面加入色塊設計
- [ ] 在題庫檔案頁面加入色塊設計
- [ ] 在考卷範本頁面加入色塊設計
- [ ] 在考試園地頁面加入色塊設計
- [ ] 在考試管理頁面加入色塊設計
- [ ] 在補考管理頁面加入色塊設計
- [ ] 在考試監控頁面加入色塊設計
- [ ] 在部門人員頁面加入色塊設計
- [ ] 在使用者管理頁面加入色塊設計
- [ ] 測試所有頁面的視覺效果
- [ ] 儲存檢查點



## 側邊欄選單彩色設計（2025-01-22）

- [x] 為側邊欄選單項目加入彩色圖示背景
- [x] 為15個選單項目配置獨特的顏色標識
- [x] 優化選單項目的卡片式視覺效果
- [x] 加入 hover 和 active 狀態的動畫效果
- [x] 測試側邊欄在展開和收合狀態下的顯示效果
- [x] 儲存檢查點




## 緊急錯誤修復：考試答題頁面 JSON.parse 錯誤（2025-01-22）

- [x] 診斷錯誤原因（JSON.parse(...).map is not a function）
- [x] 修復 ExamTake.tsx 第543行的選項解析邏輯
- [x] 新增錯誤處理機制（try-catch + Array.isArray 檢查）
- [x] 測試修復結果
- [x] 儲存檢查點




## 題目資料品質管理系統（2025-01-22）

### 階段一：資料庫清理腳本
- [x] 建立資料庫清理腳本（scripts/fix-question-options.mjs）
- [x] 掃描所有題目的 options 欄位
- [x] 識別物件格式的選項並轉換為陣列格式
- [x] 執行批次修復並記錄修復結果（14道題目已修復）
- [x] 測試修復後的資料格式

### 階段二：前端選項格式驗證
- [x] 在 QuestionBank.tsx 的新增/編輯對話框加入驗證邏輯
- [x] 驗證選項必須為陣列格式
- [x] 驗證每個選項必須包含 label 和 value 欄位（支援字串和物件格式）
- [x] 顯示即時驗證錯誤訊息
- [ ] 測試驗證功能

### 階段三：資料品質檢查工具
- [x] 建立 DataQualityCheck.tsx 頁面
- [x] 建立 dataQualityCheck.ts 後端模組
- [x] 實作選項格式檢查 API
- [x] 實作缺少必要欄位檢查 API
- [x] 實作批次修復功能
- [x] 在側邊欄新增「資料品質檢查」選單項目（編輯者專用）
- [ ] 測試品質檢查工具

### 階段四：整合測試與交付
- [x] 測試資料庫清理腳本（14道題目已修復）
- [x] 測試前端驗證功能（TypeScript 編譯無錯誤）
- [x] 測試品質檢查工具（3個測試全部通過）
- [x] 儲存檢查點並交付




## 側邊欄選單順序調整 - 資料品質檢查位置（2025-01-22）

- [x] 將「資料品質檢查」移到「檔案管理」之上
- [x] 測試選單顯示順序
- [x] 儲存檢查點



## 考題品質檢查重新命名和位置調整（2025-01-22）

- [x] 將「資料品質檢查」改名為「考題品質檢查」
- [x] 調整選單順序：移到「題庫管理」之上、「AI分析出題」之下
- [x] 更新DashboardLayout.tsx中的選單項目名稱
- [x] 更新DataQualityCheck.tsx頁面標題
- [x] 測試選單顯示順序和名稱
- [x] 儲存檢查點



## 考題品質檢查頁面新增返回首頁按鈕（2025-01-22）

- [x] 在DataQualityCheck.tsx頁面右上角新增「返回首頁」按鈕
- [x] 使用Home圖示和outline variant樣式
- [x] 測試按鈕功能
- [x] 儲存檢查點

